<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="wish.css">
  <title>HAPPY BIRTHDAY ğŸ¥³</title>
</head>
<body>
 <div class="countdown-overlay" id="countdown-overlay">
    <div class="countdown-number" id="countdown-number">5</div>
  </div>

  <div class="message"><span id="typed-text"></span></div>

  <canvas id="fireworks"></canvas>

  <div class="surprises-button" id="startButton" onclick="startCelebration()">
    ğŸ Tap for surprise ğŸ¤­
  </div>

  <div class="surprise-button" id="gift-button" onclick="showSurprise()" style="display: none;">
    FOR U MY MUBU ğŸ¤­ğŸ
  </div>

  <div class="surprise-popup" id="surprise">
    <div class="popup-content">
      ğŸ’– happiest birthday mubarka<br>may u always be the blessed one<br>
      may u always smile and shine like a star, may all the things you get that you want,enjoy your bless day bestie may all the happiness of this world would be yours as u make my life heaven ğŸ’«<br><br>
      â€“ Your unknown ğŸ’Œ
    </div>
  </div>

  <!-- âœ… NEXT button visible after animation -->
  <div class="button" id="next-button">
    <a href="cake.html">cake cut</a>
  </div>

  <script>
      const canvas = document.getElementById("fireworks");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      let fireworks = [];

      function random(min, max) {
        return Math.random() * (max - min) + min;
      }

      class Firework {
        constructor() {
          this.x = random(0, canvas.width);
          this.y = canvas.height;
          this.targetY = random(canvas.height / 3, canvas.height / 2);
          this.size = 2;
          this.speed = random(2, 5);
          this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
          this.exploded = false;
          this.particles = [];
        }
        update() {
          if (!this.exploded) {
            this.y -= this.speed;
            if (this.y <= this.targetY) {
              this.exploded = true;
              for (let i = 0; i < 40; i++) {
                this.particles.push(new Particle(this.x, this.y, this.color));
              }
            }
          }
          this.particles.forEach((p) => p.update());
        }
        draw() {
          if (!this.exploded) {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fillStyle = this.color;
            ctx.fill();
          }
          this.particles.forEach((p) => p.draw());
        }
      }

      class Particle {
        constructor(x, y, color) {
          this.x = x;
          this.y = y;
          this.speed = random(1, 3);
          this.angle = random(0, Math.PI * 2);
          this.radius = random(1, 3);
          this.color = color;
          this.life = 60;
        }
        update() {
          this.x += Math.cos(this.angle) * this.speed;
          this.y += Math.sin(this.angle) * this.speed;
          this.life--;
        }
        draw() {
          if (this.life > 0) {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
            ctx.fillStyle = this.color;
            ctx.fill();
          }
        }
      }

      function animateFireworks() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.15)";
        // ctx.fillStyle = 'rgba(255, 192, 203, 0.15)'; // light pink with transparency
        // ctx.fillStyle = 'rgba(255, 0, 0, 0.15)';

        ctx.fillRect(0, 0, canvas.width, canvas.height);
        if (Math.random() < 0.3) {
          fireworks.push(new Firework());
        }
        fireworks.forEach((f) => {
          f.update();
          f.draw();
        });
        requestAnimationFrame(animateFireworks);
      }

      function createBalloon() {
        const balloon = document.createElement("div");
        balloon.classList.add("balloon");
        balloon.style.left = Math.random() * window.innerWidth + "px";
        balloon.style.backgroundColor = `hsl(${Math.random() * 360}, 80%, 60%)`;
        balloon.style.animationDuration = Math.random() * 2 + 2 + "s";
        document.body.appendChild(balloon);
        setTimeout(() => balloon.remove(), 5000);
      }

      function showSurprise() {
        document.getElementById("surprise").classList.add("show");
        setTimeout(() => {
          document.getElementById("surprise").addEventListener("click", () => {
            document.getElementById("surprise").classList.remove("show");
          });
        }, 100);
      }

      function startCelebration() {
        document.getElementById("startButton").style.display = "none";
        const overlay = document.getElementById("countdown-overlay");
        const number = document.getElementById("countdown-number");
        let count = 5;
        overlay.style.display = "flex";
        number.textContent = count;
        const countdownInterval = setInterval(() => {
          count--;
          if (count > 0) {
            number.textContent = count;
          } else {
            clearInterval(countdownInterval);
            overlay.style.display = "none";
            startAnimations();
          }
        }, 1000);
      }


  function startAnimations() {
  // Instantly change background to black
  document.body.style.background = "#000";


if (window.innerWidth <= 768) {
  setInterval(createBalloon, 550); // ğŸ“± Mobile: slower balloons
} else {
  setInterval(createBalloon, 400); // ğŸ’» Desktop: normal speed
}


  // Show the glowing typed message
  const message = "ğŸ‰ Happy birthday Mubarka ğŸ‰ğŸ’–";
  const typedText = document.getElementById("typed-text");
  typedText.innerHTML = "";
  const container = document.querySelector(".message");
  container.style.display = "block";

  // Start fireworks and balloons immediately
  animateFireworks();
  
if (window.innerWidth <= 768) {
  setInterval(createBalloon, 550); // ğŸ“± Mobile: slower balloons
} else {
  setInterval(createBalloon, 400); // ğŸ’» Desktop: normal speed
}

  // Start typing animation
   let i = 0;
  const plainMessage = message.replace("\n", ""); // don't double-count \n
  const typingInterval = 5 / message.length;

  const typeEffect = setInterval(() => {
    if (i < message.length) {
      typedText.innerHTML += message[i] === "\n" ? "<br>" : message[i];
      i++;
    } else {
      clearInterval(typeEffect);
      // Show gift and next buttons after text completes
      document.getElementById("gift-button").style.display = "block";
      document.getElementById("next-button").style.display = "block";
    }
  }, typingInterval);
}
  </script>
</body>
</html>
